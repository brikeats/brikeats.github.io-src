<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Brian Keating</title><link href="http://brikeats.github.io/" rel="alternate"></link><link href="http://brikeats.github.io/feeds/all.atom.xml" rel="self"></link><id>http://brikeats.github.io/</id><updated>2017-09-23T12:50:00-05:00</updated><entry><title>Eclipse</title><link href="http://brikeats.github.io/eclipse.html" rel="alternate"></link><published>2017-09-23T12:50:00-05:00</published><updated>2017-09-23T12:50:00-05:00</updated><author><name>Brian Keating</name></author><id>tag:brikeats.github.io,2017-09-23:/eclipse.html</id><summary type="html">&lt;p&gt;Eclipse&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;img alt="eclipse totality" src="http://brikeats.github.io/images/totality.jpg"&gt;&lt;/p&gt;
&lt;p&gt;My wife and I were fortunate enough to be able to see the eclipse in August just outside of Salem, Oregon. Our friend, Heidi, drove us down from Seattle where we were vacationing. I was concerned about the weather -- it's a bit of a drive and coastal Oregon isn't known for being sunny -- but it turned out to be a beautiful cloudless day and totality was just spectacular. I didn't get any pics of totality, but Heidi had brought her non-phone camera and got some good pics of totality (including the one above) and a video of the "diamond ring". She didn't have a tripod, so the sun wanders about in the frame:&lt;/p&gt;
&lt;p&gt;&lt;a href="https://www.youtube.com/watch?v=q3EKl2VAPe0"&gt;&lt;img alt="Alt text" src="https://img.youtube.com/vi/q3EKl2VAPe0/0.jpg"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Looks pretty good, but I wanted to correct for this motion. This is a fairly easy problem, since the sun is infinitely far away and it doesn't change shape (so we only need to find 2 translations to register the frames), and the background is featureless black sky. I initially tried creating an eclipse-looking template, and using that to search each frame for the sun's position. This mostly worked well, but it was not robust -- it failed badly for some frames. I believe that some of the lens flares and other artifacts hurt the performance.&lt;/p&gt;
&lt;p&gt;Finally, I just used &lt;a href="http://scikit-image.org/docs/dev/auto_examples/transform/plot_register_translation.html"&gt;skimage's register_translation&lt;/a&gt; function to register consecutive frames. With the correct translations in hand, I zero pad the images such that the sun is in the center of every frame, write the images to file, and make them into a movie with ffmpeg. I also grabbed this image of the diamond ring:&lt;/p&gt;
&lt;p&gt;&lt;img alt="eclipse diamond ring" src="http://brikeats.github.io/images/diamond_ring.jpg"&gt;&lt;/p&gt;
&lt;p&gt;The final result:&lt;/p&gt;
&lt;p&gt;&lt;a href="https://www.youtube.com/watch?v=uao88kE0ukA"&gt;&lt;img alt="Alt text" src="https://img.youtube.com/vi/uao88kE0ukA/0.jpg"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;The notebook used to produce these videos can be viewed &lt;a href="http://brikeats.github.io/notebooks/eclipse.html"&gt;here&lt;/a&gt; or downloaded &lt;a href="http://brikeats.github.io/notebooks/eclipse.ipynb"&gt;here&lt;/a&gt;.&lt;/p&gt;</content><category term="demo"></category><category term="video"></category></entry></feed>